# minikube 시작

minikube start --memory 15976 --driver=docker

# minikube와 맥의 도커 image 관리 동기화

minikube docker-env
eval $(minikube -p minikube docker-env)

# yml 적용

kubectl apply -f express-service.yml

# 서비스 포워딩

kubectl port-forward service/nodejs-app 31000

# 요소 디버깅

kubectl logs nodejs-app-6b9bd587d9-wzwzk -c nodejs-app2

kubectl exec -it <pod_name> --container <container_name> -- /bin/bash

kubectl -n hadoop get events --sort-by='{.lastTimestamp}'

# 요소 제거

kubectl delete deployment nodejs-app

# 이미지 빌드

docker build -t express:latest .

# 이미지 로드

minikube image load express:latest
minikube image ls --format tabl

# minikube 안의 이미지 제거

minikube ssh
docker images
docker stop [이미지_아이디] => 생략 가능
docker rmi [이미지_아이디]

# 맥의 이미지 제거

docker system prune -a

# 도커 실행 상태

docker ps -a

# 도커 이미지 목록

docker images

# 요소 제거

kubectl delete all --all -n hadoop => pv, pvc 제거 안됨

kubectl delete deployment --all --all-namespaces
kubectl delete svc --all --all-namespaces
kubectl delete ingress --all --all-namespaces
kubectl delete pvc --all --all-namespaces
kubectl delete pv --all --all-namespaces

kubectl delete -f hadoop.yml

# 현재 namespace 확인

kubectl config view --minify --output 'jsonpath={..namespace}'

# namespace 변경

kubectl config set-context --current --namespace=airflow

# namespace 생성

kubectl create namespace
